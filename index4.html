<!DOCTYPE html>
<html lang="ko">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>KT AI P-TF</title>

    <!-- Bootstrap Core CSS -->
    <link href="../static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../static/vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- DataTables CSS -->
    <link href="../static/vendor/datatables-plugins/dataTables.bootstrap.css" rel="stylesheet">

    <!-- DataTables Responsive CSS -->
    <link href="../static/vendor/datatables-responsive/dataTables.responsive.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../static/dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href=https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css rel="stylesheet">
    <link href="../static/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <style type="text/css">
        .dohyeon { font-family: 'Noto Sans KR', sans-serif; }
    </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js" crossorigin="anonymous"></script>
</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-top: 35px">
                <span>
                    <div style="position:absolute; top:-15px; left:30px;">
                    <img src="../static/img/ktci2.png" alt="My Image" width=auto; height="50">
                    </div>
                </span>
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand dohyeon" href="http://127.0.0.1:5000/" style="font-size: 25px; padding: 0px 40px;">　　　AI P-TF 1조</a>
            </div>
            <!-- /.navbar-header -->

            <ul class="nav navbar-top-links navbar-right">

                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                        </li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="#"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
<!--                        <li class="sidebar-search">-->
<!--                            <div class="input-group custom-search-form">-->
<!--                                <input type="text" class="form-control" placeholder="Search...">-->
<!--                                <span class="input-group-btn">-->
<!--                                <button class="btn btn-default" type="button">-->
<!--                                    <i class="fa fa-search"></i>-->
<!--                                </button>-->
<!--                            </span>-->
<!--                            </div>-->
<!--                            &lt;!&ndash; /input-group &ndash;&gt;-->
<!--                        </li>-->
                         <li>
                            <a href="http://127.0.0.1:5000/" style="font-size: 15px; color: #5a5a5a;"><i class="fa fa-lightbulb-o fa-fw"></i> &nbsp;설계</a>
                         </li>
                        <li>
                            <a href="#" style="font-size: 15px; color: #5a5a5a;"><i class="glyphicon glyphicon-search"></i> &nbsp;설계 상세</a>
                        </li>
                        <li>
                            <a href="index4.html" style="font-size: 15px; color: #5a5a5a;"><i class="glyphicon glyphicon-list-alt"></i> &nbsp;시설 현황</a>
                        </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <div id="page-wrapper" style="margin: -20px 0 0 250px;">
            <div class="row">
                <div class="col-lg-12">
                    <h3 class="page-header dohyeon" style="margin: 20px 0 20px;">시설 현황</h3>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->

            <!-- ★★변경★★ -->
            <div class="row">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            지역별 시설 분포
                        </div>
                        <div class="panel-body">
                            <div class="card-body row">
                                    <div class="col-lg-3">
                                        <canvas id="myPieChart"></canvas>
                                        <br>
                                        <p style="text-align:center;">광주시 오포읍 신현리</p>
                                    </div>
                                    <div class="col-lg-3">
                                        <canvas id="myPieChart2"></canvas>
                                        <br>
                                        <p style="text-align:center;">성남시 분당구 백현동</p>
                                    </div>
                                    <div class="col-lg-3">
                                        <canvas id="myPieChart3"></canvas>
                                        <br>
                                        <p style="text-align:center;">성남시 분당구 판교동</p>
                                    </div>
                                    <div class="col-lg-3">
                                        <canvas id="myPieChart4"></canvas>
                                        <br>
                                        <p style="text-align:center;">성남시 분당구 삼평동</p>
                                    </div>
                            </div>
                        </div>
                    </div>>
            </div>
            <!-- ★★변경 끝★★ -->

            <div class="row">
                <div class="panel panel-default">
                    <div class="panel-heading">
                            주소 검색
                    </div>
                    <div class="panel-body">
                        <section class="search-sec">
                            <div action="#" method="post" novalidate="novalidate">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="row">
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <label class="text-white" for="inputEmail1">지번 검색 - 특별시/도</label>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <label class="text-white" for="inputEmail2">시/군/구</label>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <label class="text-white" for="inputEmail3">읍/면/동</label>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <label class="text-white" for="inputEmail3">번지</label>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <label class="text-white" for="inputEmail3">BM 구분</label>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <select class="form-control search-slt" id="add1">
                                                        <option>경기도</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <select class="form-control search-slt" id="add2" onchange="add2()">
                                                    </select>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <select class="form-control search-slt" id="add3">
                                                        <option>선택하세요</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <input type="text" class="form-control search-slt" placeholder="예) 45">
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <select class="form-control search-slt" id="exampleFormControlSelect1">
                                                        <option>시설 구분</option>
                                                        <option>초고속</option>
                                                        <option>전송</option>
                                                        <option>전용</option>
                                                        <option>기타</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <p style="margin-top:5px;">
                                            <div class="row">
                                                <div class="col-lg-3 col-md-3 col-sm-12">
                                                    <button type="button" class="btn btn-info" style="background-color: #593cc1; border-color: #593cc1;">검색
                                                    </button>
                                                    <button type="reset" class="btn btn-info" style="background-color: #593cc1; border-color: #593cc1;">Reset
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                    <!--도로명 검색-->
                                        <div class="col-lg-12">
                                            <br>
                                            <div class="row">
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <label class="text-white" for="inputEmail1">도로명 검색 - 특별시/도</label>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <label class="text-white" for="inputEmail2">시/군/구</label>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <label class="text-white" for="inputEmail3">도로명</label>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <label class="text-white" for="inputEmail3">건물번호</label>
                                                </div>
                                                <div class="col-lg-2 col-md-2 col-sm-12">
                                                    <label class="text-white" for="inputEmail3">BM 구분</label>
                                                </div>
                                            </div>

                                            <div class="row">
                                            <div class="col-lg-2 col-md-2 col-sm-12">
                                                <select class="form-control search-slt" id="add11">
                                                    <option>경기도</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-12">
                                                <select class="form-control search-slt" id="add22" onchange="add22()">
                                                </select>
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-12">
                                                <select class="form-control search-slt" id="add33">
                                                <option>시설 구분</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-2 col-md-2 col-sm-12">
                                                <input type="text" class="form-control search-slt" placeholder="예) 45">
                                            </div>

                                            <div class="col-lg-2 col-md-2 col-sm-12">
                                                <select class="form-control search-slt" id="exampleFormControlSelect1">
                                                    <option>시설 구분</option>
                                                    <option>초고속</option>
                                                    <option>전송</option>
                                                    <option>전용</option>
                                                    <option>기타</option>
                                                </select>
                                            </div>
                                        </div>
                                            <p style="margin-top:5px;">
                                            <div class="row">
                                                <div class="col-lg-3 col-md-3 col-sm-12">
                                                    <button type="button" class="btn btn-info" style="background-color: #593cc1; border-color: #593cc1;">검색
                                                    </button>
                                                    <button type="reset" class="btn btn-info" style="background-color: #593cc1; border-color: #593cc1;">Reset
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                <br>

                                <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="true" aria-controls="collapseExample" style="color: #593cc1; background-color: #ffffff; border-color: #593cc1;">
                                결과 확인
                                </button>
                                <button class="btn btn-primary" type="button" onclick="btn_click2();" style="color: #593cc1; background-color: #ffffff; border-color: #593cc1;">
                                시험용
                                </button>

                                <div class="collapse" id="collapseExample">
                                    <div class="card card-body">
                                        <table id="tableData" class="table">
                                            <thead id="head">
                                            <tr>
                                                <th scope="col">순번</th>
                                                <th scope="col" style="width: 10%">건물명</th>
                                                <th scope="col">건물유형</th>
                                                <th scope="col">연면적</th>
                                                <th scope="col">최고 층 수</th>
                                                <th scope="col">최저 층 수</th>
                                                <th scope="col">지역</th>
                                                <th scope="col">세대수</th>
                                                <th scope="col" style="width: 25%">주소</th>
                                                <th scope="col">인입광</th>
                                            </tr>
                                            </thead>
                                        </table>

                                    </div>
                                </div>



                </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="../static/vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../static/vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../static/vendor/metisMenu/metisMenu.min.js"></script>

    <!-- DataTables JavaScript -->
    <script src="../static/vendor/datatables/js/jquery.dataTables.min.js"></script>
    <script src="../static/vendor/datatables-plugins/dataTables.bootstrap.min.js"></script>
    <script src="../static/vendor/datatables-responsive/dataTables.responsive.js"></script>

    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../static/dist/js/sb-admin-2.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
        integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
        crossorigin="anonymous"></script>
    <script src="../static/vendor/jquery/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>


        <script type="text/javascript">
            var result;

            function btn_click2() {
            console.log("1차 통과")
            var param1 = document.getElementById('param1').value
            var param2 = document.getElementById('param2').value
            var param3 = document.getElementById('param3').value
            var param4 = document.getElementById('param4').value
            var param5 = document.getElementById('param5').value
            var param6 = document.getElementById('param6').value

                                                var t = $('#tableData').DataTable().destroy();
                                                var t = $('#tableData').DataTable(
                                                    {
                                                        columnDefs: [
                                                            { targets: '_all' }
                                                        ],
                                                        lengthChange: false,
                                                        searching: false,
                                                        ordering: false,
                                                        info: false,
                                                        paging: true
                                                    }
                                                );
                                                t.clear();
                                                t.draw();
            console.log("2차 통과")
            $.ajax({
                            type : 'POST',
                            url : 'http://127.0.0.1:5000/test',
                            data : {
                                    itemid1:param1,
                                    itemid2:param2,
                                    itemid3:param3,
                                    itemid4:param4,
                                    itemid5:param5,
                                    itemid6:param6
                            },
                            dataType : 'JSON',
                            success : function(result)
                                {
                                var locations = result

                                        for (var i in locations){
                                              t.row.add(
                                                     [locations[i][0], locations[i][3], locations[i][5], locations[i][7],
                                                      locations[i][8],locations[i][9],locations[i][10],locations[i][11],
                                                      locations[i][12],locations[i][14]]).draw();
                                        }
                                }
                    });
    }





    <script type="text/javascript">

         var totaldata = JSON.parse('{{ add2 | tojson | safe}}');
         locations = totaldata;
         console.log('totaldata');
         console.log(totaldata);
          var row = `<option value="">선택하세요</option>`
                                        var table = $('#add2')
                                      table.append(row)
                                    for (var i in locations){

                                        console.log(locations[i][0])
                                      var row = `
                                                <option value="${locations[i][0]}">${locations[i][0]}</option>`
                                        var table = $('#add2')
                                      table.append(row)
                                    }

    </script>

    <script type="text/javascript">

         var totaldata = JSON.parse('{{ add22 | tojson | safe}}');
         locations = totaldata;
          var row = `<option value="">선택하세요</option>`
                                        var table = $('#add22')
                                      table.append(row)
                                    for (var i in locations){


                                      var row = `
                                                <option value="${locations[i][0]}">${locations[i][0]}</option>`
                                        var table = $('#add22')
                                      table.append(row)
                                    }

    </script>

    <script type="text/javascript">
           function add2() {
            var x = document.getElementById("add2").value;
            $('#add3').empty();
            console.log('test')
             $.ajax({
                            type : 'POST',
                            url : 'http://127.0.0.1:5000/add',
                            data : {
                                    x_py: x
                            },
                            dataType : 'JSON',
                            success : function(result){
            locations = result[0];
          var row = `<option value="">선택하세요</option>`
                                        var table = $('#add3')
                                      table.append(row)
                                    for (var i in locations){

                                      console.log(locations[i][0])
                                      var row = `
                                                <option value=${locations[i][0]}>${locations[i][0]}</option>`
                                        var table = $('#add3')
                                      table.append(row)
                                    }
                            }
            });
    };
    </script>


    <script type="text/javascript">
           function add22() {
            var x = document.getElementById("add22").value;
            $('#add33').empty();
            console.log('test')
             $.ajax({
                            type : 'POST',
                            url : 'http://127.0.0.1:5000/add',
                            data : {
                                    x_py: x
                            },
                            dataType : 'JSON',
                            success : function(result){
            locations = result[0];
          var row = `<option value="">선택하세요</option>`
                                        var table = $('#add33')
                                      table.append(row)
                                    for (var i in locations){


                                      var row = `
                                                <option value=${locations[i][0]}>${locations[i][0]}</option>`
                                        var table = $('#add33')
                                      table.append(row)
                                    }
                            }
            });
    };
    </script>

    <!-- Page-Level Demo Scripts - Tables - Use for reference -->
    <script>
    $(document).ready(function() {
        $('#dataTables-example').DataTable({
            responsive: true
        });
    });
    </script>



    <script type="text/javascript">
            var ctx = document.getElementById("myPieChart");
            var myPieChart = new Chart(ctx, {
              type: 'pie',
              data: {
                labels: ["초고속", "전송", "광전화", "무선"],
                datasets: [{
                  data: [12.21, 15.58, 11.25, 8.32],
                  backgroundColor: ['#fe8bdb', '#68fce1', '#7788ff', '#ffd45a'],
                }],
              },
            });
    </script>
        <script type="text/javascript">
            var ctx = document.getElementById("myPieChart2");
            var myPieChart = new Chart(ctx, {
              type: 'pie',
              data: {
                labels: ["초고속", "전송", "광전화", "무선"],
                datasets: [{
                  data: [12.21, 15.58, 11.25, 8.32],
                  backgroundColor: ['#fe8bdb', '#68fce1', '#7788ff', '#ffd45a'],
                }],
              },
            });
    </script>
        <script type="text/javascript">
            var ctx = document.getElementById("myPieChart3");
            var myPieChart = new Chart(ctx, {
              type: 'pie',
              data: {
                labels: ["초고속", "전송", "광전화", "무선"],
                datasets: [{
                  data: [12.21, 15.58, 11.25, 8.32],
                  backgroundColor: ['#fe8bdb', '#68fce1', '#7788ff', '#ffd45a'],
                }],
              },
            });
    </script>
        <script type="text/javascript">
            var ctx = document.getElementById("myPieChart4");
            var myPieChart = new Chart(ctx, {
              type: 'pie',
              data: {
                labels: ["초고속", "전송", "광전화", "무선"],
                datasets: [{
                  data: [12.21, 15.58, 11.25, 8.32],
                  backgroundColor: ['#fe8bdb', '#68fce1', '#7788ff', '#ffd45a'],
                }],
              },
            });
    </script>


    <script type="text/javascript">
        var ctx = document.getElementById("myBarChart");
        var myLineChart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: ["초고속", "전송", "전용", "무선"],
            datasets: [{
              label: "Revenue",
              backgroundColor: "rgba(2,117,216,1)",
              borderColor: "rgba(2,117,216,1)",
              data: [4215, 5312, 6251, 7841],
            }],
          },
          options: {
            scales: {
              xAxes: [{
                time: {
                  unit: 'month'
                },
                gridLines: {
                  display: false
                },
                ticks: {
                  maxTicksLimit: 6
                }
              }],
              yAxes: [{
                ticks: {
                  min: 0,
                  max: 10000,
                  maxTicksLimit: 5
                },
                gridLines: {
                  display: true
                }
              }],
            },
            legend: {
              display: false
            }
          }
        });
    </script>


</body>

</html>
